### 解决问题：
1. 构建建立自然序和沃尔什序、切蛋糕序、俄罗斯套娃序、权重序的关系
2. 在不生成矩阵情况下建立了上述各种排序和原始自然序的对应关系
3. 在不生产矩阵条件下实现了上述各种排序的欠采样条件的部分哈达玛矩阵和pattern sequence的生成[[无矩阵散斑生成]]
4. 建立了上述index和无矩阵图像重构方法的联系[[无矩阵图像重构]]

~~自然序~~：[[NA序]]  natural
~~切蛋糕序~~：[[CC序]] cake cutting (Yu 2018)
~~俄罗斯套娃序~~：[[RD序]] russian doll (Sun2017)
~~权重序~~：[[WE序]]weigthted (Yu 2022)
~~沃尔什序~~：[[SE序]] sequency
~~折纸排序~~：[[OG序]] origami (Yu 2018)
* **传统方法：**
1. 通过 Sylvester公式构造Hadamard矩阵 
$$$H_{2^{k}}=\left[\begin{array}{cc}H_{2^{k-1}} & H_{2^{k-1}} \\ H_{2^{k-1}} & -H_{2^{k-1}}\end{array}\right]=H_{2} \otimes H_{2^{k-1}}$$
2. 将$H$每一行reshape成正方形pattern，分析其二维几何特性
3. 按几何特性对各行进行reorder

以目前部分cake cutting矩阵的构造顺序为例，现：
1. 构造$2^k$阶完整的NA矩阵，
2. 通过Gray code转为SE矩阵，
3. 根据经验公式转为CC序矩阵
``` 
for i=1:length(k) block_num((i_odd(i)-1)*p+1:i_odd(i)*p)=i_odd(i):i_odd(i):p*i_odd(i);
block_num((i_even(i)-1)*p+1:i_even(i)*p)=p*i_even(i):-i_even(i):i_even(i);
end
```
- **存在问题：**
1. 速度过慢，需要按递推公式构造完整的NA矩阵，在高分辨率($256\times256$及以上成像问题中优于电脑内存限制无法构造）
2. 浪费计算资源，实际在中高分辨率的成像场景中大多为欠采样成像场景，只需要构造部分的pattern sequence和部分的hadamard矩阵
3. 需要建立统一科学的构造理论而非经验公式
4. 需要通过对大量数据集图像进行实验来验证各排序方法的优劣
#### NA序矩阵的行号和其行向量、pattern的对应关系
hadamard的pattern和行向量是reshape函数来相互转换的，通过一者可以确定的那个另一者。
- pattern 主要用来分析几何性质排序，以及生成加载到DMD上
- 行向量 主要用来构造测量矩阵，作为算法的输入

对于NA矩阵每一行我们定义**翻折序列**来描述该第$i$行行向量的构造过程
$S_i=[a_{1}, a_{2}, \cdots, a_{k}, a_{k+1}, a_{k+2}, \cdots, a_{k} ]$代表行向量翻折了k次，
 序列中每一个元素$a_i\in\{1,-1\}$ 1代表复制操作，-1代表取反复制$h_1=1$操作。
 以下为构造过程：$a_1=1,h_1=[1,1];a_1=-1,h_1=[1,-1]$; $a_{k}=1,h_{k+1}=[h_{k},h_{k}];a_{k}=-1,h_{k+1}=[h_{k},-h_{k}]$,
以$H_{16}$的第6行为例分析其构造过程
![[na6c.jpg]]
第六行的翻折序列为$[-1,1,-1,1]$,行向量的构造形式如图。

事实上NA矩阵行向量翻折序列行号的二进制数存在着对应关系,
	设$i$的$k$进制下的表示为$B_i^{k}$，则$i=(B_i^{k})_2+1$,$B_i^{k}$含有$k$个元素，用向量表示为$ba=[b_1,b_2,\cdots,b_{k-1},b_k]$,$b_i$为$(B_i^{k})_2$的第$i$位，$S$和$ba$存在以下关系
	$$
	ba=TS
$$
$T$使S的所有元素按中心进行反转，使$-1$元素变为1，1元素变为0；
上述为行向量的构造过程，而pattern的构造过程，前一半元素实现pattern第一行的构造，而后一半元素 对第一行的复制或取反复制操作。
总结：
1. 哈达玛矩阵的每一个pattern和NA行号(对应的二进制数)一一对应（可以相互确定）
2. 二进制数数列的前一半元素控制列的反转，后一半元素控制行的反转（翻折序列对称）

1. [[SE序]]
2. [[CC序]]：
3. [[RD序]]
4. [[OG序]]

重构效果比较：


airplane
![[re2.jpg]]
barbara
![[re4.jpg]]lena
![[re5.jpg]] 

存在差异
og和rd在中采样下不会劣于cc序